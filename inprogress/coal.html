<!DOCTYPE html>
<html lang="en">
<head>
    <link id="dynamic-favicon" rel="icon" href="/logo/shzh.svg">
    <script src="/scripts/theme-loader.js"></script>
    <meta charset="UTF-8">
    <meta name="eink-compatibility" content="optimized"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" data-key="coal_desc">
    <meta name="keywords" content="">
    <meta name="translation-source" content="coal">
    <title>coal</title>
    <link rel="stylesheet" href="/styles/pelmeni2025.css">
    <link rel="stylesheet" href="/styles/article.css">
</head>
<body class="eink-mode light-mode">
    <nav id="nav-window" class="window">
        <div class="title-bar"><span class="title" data-key="win_gallerynav_title">◈ coal.nav</span><button class="close-btn">&times;</button></div>
        <div class="content">
        <ul>
            <li><a href="#this-is-my-first-heading" data-key="coal_nav_this-is-my-first-heading"></a></li>
            <li><a href="#a-subsection" data-key="coal_nav_a-subsection"></a></li>
            <li><a href="#here-is-another-major-section" data-key="coal_nav_here-is-another-major-section"></a></li>
        </ul>
        <a href="/index.html">⌂← Home</a></div>
    </nav>
    <div id="chirper-demo-placeholder"></div>
<main id="gallery-window" class="window" style="top: 0; left: 260px; right: 0; bottom: 0; position: absolute; z-index: 2;">
        <div class="title-bar"><span class="title" data-key="win_gallery_title">▤ coal.article</span><button class="close-btn">&times;</button></div>
        <article class="content"><h1 id="title" data-key="coal_title"></h1>
        
        <h2 id="this-is-my-first-heading" data-key="coal_h2_this-is-my-first-heading"></h2>
        <p data-key="coal_p1"></p>
        <h3 id="a-subsection" data-key="coal_h3_a-subsection"></h3>
        <p data-key="coal_p2"></p>
        <ul data-key="coal_ul1"></ul>
        <h2 id="here-is-another-major-section" data-key="coal_h2_here-is-another-major-section"></h2>
        <p data-key="coal_p3"></p>

        </article>
</main>
    
    <div id="start-menu-module-placeholder"></div>
    <script src="/scripts/module-loader.js" defer></script>
    <!-- Add this where you want the generator to appear -->
    <div id="filtertakeout-module-placeholder"></div>
    <div id="settings-module-placeholder"></div>

    
    <script>
        // This script is self-contained and does not rely on external libraries.
        function setupChirperModals() {
            // This function needs to be callable after the module is loaded.
            const chirperContainer = document.querySelector('.window > .title-bar > [data-key="ch_win_timeline_title"]')?.closest('.window');
            if (!chirperContainer) return;

            const reputationBadges = chirperContainer.querySelectorAll('.reputation-badge');
            reputationBadges.forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation(); 
                    const modalId = button.getAttribute('data-modal-target');
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.classList.remove('hidden');
                    }
                });
            });

            const closeButtons = document.querySelectorAll('.modal-close');
            closeButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    event.stopPropagation();
                    const modal = button.closest('.ledger-modal-overlay');
                    if(modal) {
                       modal.classList.add('hidden');
                    }
                });
            });

            const modalOverlays = document.querySelectorAll('.ledger-modal-overlay');
            modalOverlays.forEach(modal => {
                modal.addEventListener('click', (event) => {
                    if (event.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
        }
        
        // This is the ONLY trigger. It waits for the signal from your module-loader.js
        // that all modules have been injected into the page.
        document.addEventListener('modulesLoaded', setupChirperModals);
    </script>
    <script>
        document.addEventListener('modulesLoaded', () => {

            if (typeof initializeFilterTakeout === 'function') {
                initializeFilterTakeout();
            }
        });
    </script>
    <script src="/scripts/blog/demos/filtertakeout.js" defer></script>
</body>
</html>